{"version":3,"sources":["../../../../src/app/alerts/page.tsx","../../../../src/components/AlertSetupModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport AlertSetupModal from '../../components/AlertSetupModal';\n\nconst AlertsPage = () => {\n    const [isModalOpen, setIsModalOpen] = useState(false);\n\n    return (\n        <div className=\"container\" style={{ paddingTop: '2rem' }}>\n            <div className=\"alerts-card\">\n                <h1 style={{ fontSize: '1.75rem', fontWeight: 'bold', marginBottom: '0.5rem' }}>\n                    Create a weather alert\n                </h1>\n                <p style={{ color: '#64748b', marginBottom: '2rem' }}>\n                    Get notifications for specific weather conditions in any city.\n                </p>\n\n                <button\n                    onClick={() => setIsModalOpen(true)}\n                    className=\"btn-primary\"\n                    style={{\n                        width: '100%',\n                        padding: '1rem',\n                        backgroundColor: '#3b82f6',\n                        color: 'white',\n                        border: 'none',\n                        borderRadius: '8px',\n                        fontSize: '1rem',\n                        fontWeight: '600',\n                        cursor: 'pointer'\n                    }}\n                >\n                    Create Alert\n                </button>\n\n                <div style={{ marginTop: '3rem' }}>\n                    <h2 style={{ fontSize: '1.5rem', fontWeight: 'bold', marginBottom: '1rem' }}>\n                        My Alerts\n                    </h2>\n                    <p style={{ color: '#64748b' }}>\n                        You have no saved alerts.\n                    </p>\n                </div>\n            </div>\n\n            <AlertSetupModal\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n            />\n\n            <style jsx>{`\n        .alerts-card {\n          background: white;\n          border-radius: 12px;\n          padding: 2rem;\n          box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n        }\n        .btn-primary:hover {\n          background-color: #2563eb;\n        }\n      `}</style>\n        </div>\n    );\n};\n\nexport default AlertsPage;\n","\"use client\";\n\nimport React, { useState } from 'react';\nimport { useLanguage } from '../context/LanguageContext';\nimport { db } from '../lib/firebase';\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\nimport { Bell, X } from 'lucide-react';\n\ninterface AlertSetupModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nconst AlertSetupModal = ({ isOpen, onClose }: AlertSetupModalProps) => {\n    const { t } = useLanguage();\n    const [city, setCity] = useState('');\n    const [submitting, setSubmitting] = useState(false);\n\n    if (!isOpen) return null;\n\n    const handleSave = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!city) return;\n\n        setSubmitting(true);\n        try {\n            // Geocode city to get lat/lon\n            const res = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city}&count=1&language=en&format=json`);\n            const data = await res.json();\n\n            if (data.results && data.results.length > 0) {\n                const { latitude, longitude, name } = data.results[0];\n                const userId = 'temp-user-id'; // TODO: Replace with real auth\n\n                await addDoc(collection(db, `users/${userId}/alerts`), {\n                    city: name,\n                    location: { latitude, longitude },\n                    condition: 'Rain', // Fixed to Rain as per requirements\n                    createdAt: serverTimestamp(),\n                });\n\n                onClose();\n                alert('Alert set for Rain in ' + name);\n            } else {\n                alert('City not found');\n            }\n        } catch (error) {\n            console.error(\"Error saving alert:\", error);\n        } finally {\n            setSubmitting(false);\n        }\n    };\n\n    return (\n        <div className=\"modal-overlay\">\n            <div className=\"modal-content\">\n                <button className=\"close-btn\" onClick={onClose}><X size={24} /></button>\n                <h2>Set Rain Alert</h2>\n                <form onSubmit={handleSave}>\n                    <div className=\"form-group\">\n                        <label>City</label>\n                        <input\n                            type=\"text\"\n                            value={city}\n                            onChange={(e) => setCity(e.target.value)}\n                            placeholder=\"Enter city name\"\n                            required\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Condition</label>\n                        <div className=\"condition-preview\">\n                            <Bell size={20} />\n                            <span>Rain (Fixed)</span>\n                        </div>\n                    </div>\n                    <button type=\"submit\" className=\"submit-btn\" disabled={submitting}>\n                        {submitting ? 'Saving...' : 'Set Alert'}\n                    </button>\n                </form>\n            </div>\n\n            <style jsx>{`\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.5);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 100;\n        }\n        .modal-content {\n          background: var(--background);\n          padding: 2rem;\n          border-radius: 1rem;\n          position: relative;\n          width: 90%;\n          max-width: 400px;\n        }\n        .close-btn {\n          position: absolute;\n          top: 1rem;\n          right: 1rem;\n          background: none;\n          border: none;\n          cursor: pointer;\n          color: var(--foreground);\n        }\n        h2 {\n          margin-bottom: 1.5rem;\n          text-align: center;\n        }\n        .form-group {\n          margin-bottom: 1rem;\n        }\n        label {\n          display: block;\n          margin-bottom: 0.5rem;\n          font-weight: bold;\n        }\n        input {\n          width: 100%;\n          padding: 0.75rem;\n          border: 1px solid rgba(128, 128, 128, 0.2);\n          border-radius: 0.5rem;\n          background: var(--background);\n          color: var(--foreground);\n        }\n        .condition-preview {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          padding: 0.75rem;\n          background: rgba(128, 128, 128, 0.1);\n          border-radius: 0.5rem;\n        }\n        .submit-btn {\n          width: 100%;\n          padding: 1rem;\n          background: var(--primary);\n          color: white;\n          border: none;\n          border-radius: 0.5rem;\n          font-weight: bold;\n          cursor: pointer;\n          margin-top: 1rem;\n        }\n        .submit-btn:disabled {\n          opacity: 0.7;\n          cursor: not-allowed;\n        }\n      `}</style>\n        </div>\n    );\n};\n\nexport default AlertSetupModal;\n"],"names":[],"mappings":"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"}